!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).vanillaObserver=t()}(this,function(){"use strict";return function(e,t){void 0===t&&(t=!0);var a=document&&document.createElement,s={__lern:0,__lern_length:20,state:e,events:new Set,listen:function(e,t){return t.getMemo=e,t.lastMemo=e(s.state),s.events.has(t)||s.events.add(t),function(){s.unListen(t)}},listenElement:function(e,t,n,o){if(void 0===o&&(o=!0),a){var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];document.body.contains(i.element)?n.apply(void 0,e):l()};i.element=e;var l=s.listen(t,i);o&&n.apply(void 0,t(s.state))}},unListen:function(e){e.element=null,e.getMemo=null,e.lastMemo=null,s.events.delete(e)},beforeUpdate:function(e){e&&e(s.state)},update:function(e){s.beforeUpdate(e),function(e,t){e?window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(function(){t()},30):t()}(t,function(){s.__lern+=1,s.events.forEach(function(e){if(e.getMemo&&e.lastMemo){for(var t=e.getMemo(s.state),n=!1,o=0;o<e.lastMemo.length;o++){if(e.lastMemo[o]!==t[o]){n=!0;break}}e.lastMemo=t,n&&e.apply(void 0,e.lastMemo)}else e.apply(void 0,e.lastMemo);e.element&&s.__lern>s.__lern_length&&(s.__lern=0,document.body.contains(e.element)||s.unListen(e))})})}};return s}});
//# sourceMappingURL=index.js.map
