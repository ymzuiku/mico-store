!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).vanillaObserver={})}(this,function(e){"use strict";function u(e,n,t){var o=0,l=setInterval(function(){if(n<(o+=30)&&null!==l)return clearInterval(l),void(l=null);t()},e);return l}e.default=function(e,n){void 0===n&&(n=!0);var u=document&&document.createElement,a={__lern:0,__lern_length:20,state:e,events:new Set,listen:function(e,n){return n.getMemo=e,n.lastMemo=e(a.state),a.events.has(n)||a.events.add(n),function(){a.unListen(n)}},listenElement:function(e,n,t,o){if(void 0===o&&(o=!0),u){var l=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];document.body.contains(l.element)?t.apply(void 0,e):i()};l.element=e;var i=a.listen(n,l);o&&t.apply(void 0,n(a.state))}},unListen:function(e){e.element=null,e.getMemo=null,e.lastMemo=null,a.events.delete(e)},beforeUpdate:function(e){e&&e(a.state)},update:function(e){a.beforeUpdate(e),function(e,n){e?window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(function(){n()},30):n()}(n,function(){a.__lern+=1,a.events.forEach(function(e){if(e.getMemo&&e.lastMemo){for(var n=e.getMemo(a.state),t=!1,o=0;o<e.lastMemo.length;o++){if(e.lastMemo[o]!==n[o]){t=!0;break}}e.lastMemo=n,t&&e.apply(void 0,e.lastMemo)}else e.apply(void 0,e.lastMemo);e.element&&a.__lern>a.__lern_length&&(a.__lern=0,document.body.contains(e.element)||a.unListen(e))})})}};return a},e.timeoutInterval=u,e.waitElementRemoved=function(o,l,i){return void 0===l&&(l=350),void 0===i&&(i=9e5),new Promise(function(e,n){var t=u(l,i,function(){document.body.contains(o)||null===t?n():(e(),clearInterval(t),t=null)})})},e.waitElementRendered=function(o,l,i){return void 0===l&&(l=30),void 0===i&&(i=3500),new Promise(function(e,n){var t=u(l,i,function(){document.body.contains(o)&&null!==t?(e(),clearInterval(t),t=null):n()})})},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
